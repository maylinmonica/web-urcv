<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <style>
    @page { 
      margin: 0; 
      size: A4;
    }
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    body {
      font-family: 'Arial', sans-serif;
      font-size: 13px;
      color: #333;
      line-height: 1.4;
      background: #f5f5f5;
    }
    .container {
      display: flex;
      height: 100vh;
      max-height: 1122px; /* A4 height at 96 DPI */
      max-width: 794px;   /* A4 width at 96 DPI */
      margin: 0 auto;
      background: white;
      box-shadow: 0 0 20px rgba(0,0,0,0.1);
      overflow: hidden;
    }
    
    /* LEFT SIDEBAR */
    .sidebar {
      width: 280px;
      background: #2c3e50;
      color: white;
      padding: 25px 20px;
      position: relative;
      overflow-y: auto;
    }
    .profile-section {
      text-align: center;
      margin-bottom: 25px;
    }
    .profile-image {
      width: 120px;
      height: 120px;
      border-radius: 15px;
      background: linear-gradient(135deg, #e67e22, #f39c12);
      margin: 0 auto 20px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 40px;
      font-weight: bold;
      color: white;
      overflow: hidden;
    }
    .profile-image img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      border-radius: 20px;
    }
    .name {
      font-size: 22px;
      font-weight: bold;
      margin-bottom: 8px;
      line-height: 1.2;
    }
    .title {
      font-size: 13px;
      color: #bdc3c7;
      margin-bottom: 20px;
    }
    
    .sidebar-section {
      margin-bottom: 20px;
    }
    .sidebar-section h3 {
      font-size: 14px;
      margin-bottom: 12px;
      padding-bottom: 6px;
      border-bottom: 2px solid #34495e;
      color: white;
    }
    .sidebar-section p {
      color: #bdc3c7;
      margin-bottom: 10px;
      font-size: 11px;
    }
    .skills-list {
      list-style: none;
    }
    .skills-list li {
      color: #bdc3c7;
      margin-bottom: 5px;
      padding-left: 15px;
      position: relative;
      font-size: 11px;
    }
    .skills-list li:before {
      content: "‚Ä¢";
      color: #e67e22;
      font-weight: bold;
      position: absolute;
      left: 0;
    }
    .contact-info {
      color: #bdc3c7;
      margin-bottom: 10px;
      font-size: 11px;
    }
    
    /* RIGHT CONTENT */
    .content {
      flex: 1;
      padding: 25px 20px;
      overflow-y: auto;
    }
    .content-section {
      margin-bottom: 25px;
    }
    .content-section h2 {
      font-size: 18px;
      color: #2c3e50;
      margin-bottom: 15px;
      padding-bottom: 6px;
      border-bottom: 2px solid #e67e22;
      position: relative;
    }
    .entry {
      margin-bottom: 15px;
      position: relative;
      padding-left: 15px;
      font-size: 12px;
    }
    .entry:before {
      content: "";
      position: absolute;
      left: 0;
      top: 6px;
      width: 8px;
      height: 8px;
      background: #2c3e50;
      border-radius: 50%;
    }
    .entry-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      margin-bottom: 5px;
    }
    .entry-title {
      font-size: 13px;
      font-weight: bold;
      color: #2c3e50;
    }
    .entry-company {
      font-size: 11px;
      color: #7f8c8d;
      font-style: italic;
      margin-bottom: 3px;
    }
    .entry-date {
      font-size: 10px;
      color: #95a5a6;
      font-weight: 500;
    }
    .entry-description {
      color: #555;
      margin-top: 5px;
      font-size: 11px;
    }
    
    /* RESPONSIVE */
    @media (max-width: 768px) {
      .container {
        flex-direction: column;
      }
      .sidebar {
        width: 100%;
        padding: 30px 20px;
      }
      .content {
        padding: 30px 20px;
      }
      .references-grid {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- LEFT SIDEBAR -->
    <div class="sidebar">
      <div class="profile-section">
        <div class="profile-image">
          {% if cv.photo_url %}
            <img src="{{ cv.photo_url }}" alt="Profile Photo" style="width: 100%; height: 100%; object-fit: cover; border-radius: 15px;">
          {% else %}
            <!-- If no image, show initials -->
            {{ cv.first_name[0] if cv.first_name }}{{ cv.last_name[0] if cv.last_name }}
          {% endif %}
        </div>
        <div class="name">{{ cv.first_name }} {{ cv.last_name }}</div>
        <div class="title">{{ cv.job_title or 'Professional' }}</div>
        <div class="contact-info">
          {% if cv.city %}<div>üìç {{ cv.city }}</div>{% endif %}
          {% if cv.email %}<div>‚úâÔ∏è {{ cv.email }}</div>{% endif %}
          {% if cv.phone %}<div>üìû {{ cv.phone }}</div>{% endif %}
        </div>
      </div>
      
      <!-- ABOUT ME -->
      {% if cv.profile_description %}
        <div class="sidebar-section">
          <h3>About Me</h3>
          <p>{{ cv.profile_description }}</p>
        </div>
      {% endif %}
      
      <!-- SKILLS -->
      {% if cv.skills %}
        <div class="sidebar-section">
          <h3>Skills</h3>
          <ul class="skills-list">
            {% for skill in cv.skills %}
              <li>{{ skill.name }}</li>
            {% endfor %}
          </ul>
        </div>
      {% endif %}
      
      <!-- LANGUAGES -->
      {% if cv.languages %}
        <div class="sidebar-section">
          <h3>Languages</h3>
          <ul class="skills-list">
            {% for lang in cv.languages %}
              <li>{{ lang.name }}{% if lang.proficiency %} ({{ lang.proficiency }}){% endif %}</li>
            {% endfor %}
          </ul>
        </div>
      {% endif %}
      
      <!-- INTERESTS -->
      {% if cv.interests %}
        <div class="sidebar-section">
          <h3>Interests</h3>
          <ul class="skills-list">
            {% for interest in cv.interests %}
              <li>{{ interest.description }}</li>
            {% endfor %}
          </ul>
        </div>
      {% endif %}
    </div>
    
    <!-- RIGHT CONTENT -->
    <div class="content">
      <!-- EDUCATION -->
      {% if cv.educations %}
        <div class="content-section">
          <h2>Education</h2>
          {% for edu in cv.educations %}
            <div class="entry">
              <div class="entry-header">
                <div>
                  <div class="entry-title">{{ edu.degree }}{% if edu.major %} in {{ edu.major }}{% endif %}</div>
                  <div class="entry-company">{{ edu.school_name }}</div>
                </div>
                <div class="entry-date">{{ edu.start_date or '' }} - {{ edu.end_date or '' }}</div>
              </div>
              {% if edu.description %}<div class="entry-description">{{ edu.description }}</div>{% endif %}
            </div>
          {% endfor %}
        </div>
      {% endif %}
      
      <!-- EXPERIENCE -->
      {% if cv.experiences %}
        <div class="content-section">
          <h2>Experience</h2>
          {% for exp in cv.experiences %}
            <div class="entry">
              <div class="entry-header">
                <div>
                  <div class="entry-title">{{ exp.job_title }}</div>
                  <div class="entry-company">{{ exp.company }}</div>
                </div>
                <div class="entry-date">{{ exp.start_date or '' }} - {{ exp.end_date or '' }}</div>
              </div>
              {% if exp.description %}<div class="entry-description">{{ exp.description }}</div>{% endif %}
            </div>
          {% endfor %}
        </div>
      {% endif %}
      
      <!-- LEADERSHIP & ACTIVITIES -->
      {% if cv.leaderships or cv.activities %}
        <div class="content-section">
          <h2>Leadership & Activities</h2>
          {% for lead in cv.leaderships %}
            <div class="entry">
              <div class="entry-header">
                <div>
                  <div class="entry-title">{{ lead.role }}</div>
                  <div class="entry-company">{{ lead.organization }}</div>
                </div>
                <div class="entry-date">{{ lead.start_date or '' }} - {{ lead.end_date or '' }}</div>
              </div>
              {% if lead.description %}<div class="entry-description">{{ lead.description }}</div>{% endif %}
            </div>
          {% endfor %}
          {% for act in cv.activities %}
            <div class="entry">
              <div class="entry-header">
                <div>
                  <div class="entry-title">{{ act.name }}</div>
                </div>
                <div class="entry-date">{{ act.start_date or '' }} - {{ act.end_date or '' }}</div>
              </div>
              {% if act.description %}<div class="entry-description">{{ act.description }}</div>{% endif %}
            </div>
          {% endfor %}
        </div>
      {% endif %}
    </div>
  </div>
</body>
</html>